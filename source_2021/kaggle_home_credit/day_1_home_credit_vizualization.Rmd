---
title: "day_1_data_import"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduction 

## 대회 개요
- 

## 데이터 파일 구조
- 데이터 파일 구조는 크게 2가지로 나뉠 수 있다. 

![](img/map.png)

- Credit Bureau 파일 구조와 Home Credit 파일 구조로 분리할 수 있음. 
- Bureau (External File)
- Home Credit (Internal File)
  + 현재 Home Credit File (Application train/test)
  + 이전 Home Credit File (Other's)
  
## 평가 지표
- 제출한 파일은 예측 확률과 기존 관측 대상 사이의 [ROC Curve](http://en.wikipedia.org/wiki/Receiver_operating_characteristic)로 평가 한다. 

# 분석 준비

## 패키지 불러오기
- 주요 패키지를 불러오도록 한다. 

```{r, message=FALSE, warning=FALSE}
library(tidyverse)
library(skimr)
library(GGally)
library(plotly)
library(viridis)
library(caret)
library(DT)
library(data.table)
library(lightgbm)
library(xgboost)
library(kableExtra)
```

## 데이터 불러오기
- 이번에는 `fread()`를 활용하여 데이터를 불러도록 한다. 

### train
```{r}
na_strings = c("NA", "NaN", "?", "")
train = fread('data/home-credit-default-risk/application_train.csv', 
              stringsAsFactors = FALSE, 
              data.table = FALSE, na.strings = na_strings)

train %>% skim()
```

### test 
```{r}
test = fread('data/home-credit-default-risk/application_test.csv', 
              stringsAsFactors = FALSE, 
              data.table = FALSE, na.strings = na_strings)

dim(test)
```

### bureau
```{r}
bureau = fread('data/home-credit-default-risk/bureau.csv', 
              stringsAsFactors = FALSE, 
              data.table = FALSE, na.strings = na_strings)

dim(bureau)
bureau %>% skim()
```

### previous application
```{r}
prev = fread('data/home-credit-default-risk/previous_application.csv', 
              stringsAsFactors = FALSE, 
              data.table = FALSE, na.strings = na_strings)

dim(prev)
prev %>% skim()
```


### bureau balance

```{r}
bur_balance = fread('data/home-credit-default-risk/bureau_balance.csv', 
              stringsAsFactors = FALSE, 
              data.table = FALSE, na.strings = na_strings)

dim(bur_balance)
bur_balance %>% skim()
```

### credit card balance

```{r}
credit_card_balance = fread('data/home-credit-default-risk/credit_card_balance.csv', 
              stringsAsFactors = FALSE, 
              data.table = FALSE, na.strings = na_strings)

dim(credit_card_balance)
credit_card_balance %>% skim()
```


### installments payments

```{r}
payments = fread('data/home-credit-default-risk/installments_payments.csv', 
              stringsAsFactors = FALSE, 
              data.table = FALSE, na.strings = na_strings)

dim(payments)
payments %>% skim()
```

### POS Cash Balance
```{r}
p_cash_balance = fread('data/home-credit-default-risk/POS_CASH_balance.csv', 
              stringsAsFactors = FALSE, 
              data.table = FALSE, na.strings = na_strings)

dim(p_cash_balance)
p_cash_balance %>% skim()
```

### Sample Submission
```{r}
submission = fread('data/home-credit-default-risk/sample_submission.csv', 
              stringsAsFactors = FALSE, 
              data.table = FALSE, na.strings = na_strings)

dim(submission)
submission %>% skim()
```


# 데이터 전처리

## 데이터 특징
- 모델링을 위한 데이터 전처리에서 가장 기본이 되는 train 데이터의 id를 확인해보면, 각 ID당 1개의 행(row)만 존재하는 것을 확인할 수 있다. 

```{r}
table(train$SK_ID_CURR) %>% head(10)
```
```{r}
table(bur_balance$SK_ID_BUREAU) %>% head(10)
```

## sum_bureau_balance


```{r}
table(bur_balance$SK_ID_BUREAU) %>% head(10)
```




